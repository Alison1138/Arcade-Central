<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linha do Tempo Interativa - 250 Eventos</title>
    <style>
        body { 
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; 
            background: #f0eadd; 
            display: flex; 
            flex-direction: column; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
        }

        /* --- BOT√ÉO SAIR --- */
        .exit-control {
            position: fixed;
            top: 15px;
            right: 20px;
            z-index: 2000;
        }

        .exit-button {
            background: #b71c1c; /* Tom de vermelho que combina com o marrom do menu */
            color: white;
            padding: 10px 20px;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            cursor: pointer;
            transition: 0.3s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.3);
            font-family: 'Segoe UI', sans-serif;
        }

        .exit-button:hover {
            background: #d32f2f;
            transform: scale(1.05);
        }

        #menu { 
            background: #5d4037; 
            width: 100%; 
            padding: 15px; 
            display: flex; 
            justify-content: center; 
            gap: 20px; 
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 10;
        }

        #menu button {
            padding: 10px 20px;
            cursor: pointer;
            border-radius: 5px;
            border: none;
            font-weight: bold;
            background: #ffcc80;
            color: #5d4037;
            transition: background 0.3s;
        }

        #menu button:hover {
            background: #ffa726;
        }

        #game-container {
            width: 95%;
            max-width: 1200px;
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        #timeline-container {
            width: 100%;
            overflow-x: auto;
            padding: 40px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            background: #fff;
            border-radius: 10px;
            box-shadow: inset 0 0 10px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            min-height: 180px;
        }

        .timeline-card, .event-card {
            min-width: 180px;
            height: 120px;
            background: #fff;
            border: 2px solid #5d4037;
            border-radius: 8px;
            padding: 10px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            text-align: center;
            font-size: 0.9rem;
            box-shadow: 2px 2px 5px rgba(0,0,0,0.1);
            position: relative;
            cursor: move;
        }

        .timeline-card { background: #e0f2f1; cursor: default; }
        .timeline-card .year { font-weight: bold; color: #00796b; margin-top: 5px; }

        .drop-zone {
            min-width: 60px;
            height: 100px;
            border: 2px dashed #bcaaa4;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #bcaaa4;
            transition: background 0.3s;
        }

        .drop-zone.hover { background: #d7ccc8; }

        #hand {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
            justify-content: center;
            padding: 20px;
        }

        .event-card { background: #fff8e1; }
        .event-card:hover { transform: translateY(-5px); box-shadow: 2px 7px 10px rgba(0,0,0,0.15); }

        #message {
            margin: 15px;
            padding: 10px;
            font-weight: bold;
            border-radius: 5px;
        }
        .success { background: #c8e6c9; color: #2e7d32; }
        .error { background: #ffcdd2; color: #c62828; }
    </style>
</head>
<body>

<div class="exit-control">
    <button onclick="window.close()" class="exit-button">SAIR DO JOGO</button>
</div>

<div id="menu">
    <button onclick="startGame('antiguidade')">Antiguidade</button>
    <button onclick="startGame('medieval')">Idade M√©dia</button>
    <button onclick="startGame('moderna')">Idade Moderna</button>
    <button onclick="startGame('contemporanea')">Idade Contempor√¢nea</button>
    <button onclick="startGame('brasil')">Hist√≥ria do Brasil</button>
    <button onclick="startGame('geral')">Mistura Geral</button>
</div>

<div id="game-container">
    <div id="message">Escolha um per√≠odo para come√ßar!</div>
    
    <div id="timeline-container">
        </div>

    <div id="hand">
        </div>
</div>

<script>
    // Banco de dados resumido (250 eventos n√£o caberiam em um exemplo curto, 
    // mas a estrutura permite expandir facilmente)
    const allEvents = {
        antiguidade: [
            { id: 1, title: "Pir√¢mides de Giz√©", year: -2560 },
            { id: 2, title: "C√≥digo de Hamurabi", year: -1754 },
            { id: 3, title: "Funda√ß√£o de Roma", year: -753 },
            { id: 4, title: "Batalha de Term√≥pilas", year: -480 },
            { id: 5, title: "Morte de Alexandre o Grande", year: -323 },
            { id: 6, title: "Assassinato de J√∫lio C√©sar", year: -44 },
            { id: 7, title: "Erup√ß√£o do Ves√∫vio (Pomp√©ia)", year: 79 },
            { id: 8, title: "Inaugura√ß√£o do Coliseu", year: 80 }
        ],
        medieval: [
            { id: 10, title: "Queda do Imp√©rio Romano", year: 476 },
            { id: 11, title: "H√©gira de Maom√©", year: 622 },
            { id: 12, title: "Coroa√ß√£o de Carlos Magno", year: 800 },
            { id: 13, title: "Batalha de Hastings", year: 1066 },
            { id: 14, title: "Primeira Cruzada", year: 1095 },
            { id: 15, title: "Magna Carta", year: 1215 },
            { id: 16, title: "Peste Negra na Europa", year: 1347 },
            { id: 17, title: "Joana d'Arc em Orleans", year: 1429 }
        ],
        moderna: [
            { id: 20, title: "Queda de Constantinopla", year: 1453 },
            { id: 21, title: "Chegada de Colombo na Am√©rica", year: 1492 },
            { id: 22, title: "95 Teses de Lutero", year: 1517 },
            { id: 23, title: "Derrota da Armada Espanhola", year: 1588 },
            { id: 24, title: "Publica√ß√£o do Principia de Newton", year: 1687 },
            { id: 25, title: "Independ√™ncia dos EUA", year: 1776 },
            { id: 26, title: "Revolu√ß√£o Francesa", year: 1789 },
            { id: 27, title: "Batalha de Waterloo", year: 1815 }
        ],
        contemporanea: [
            { id: 30, title: "Manifesto Comunista", year: 1848 },
            { id: 31, title: "Fim da Guerra de Secess√£o EUA", year: 1865 },
            { id: 32, title: "In√≠cio da 1¬™ Guerra Mundial", year: 1914 },
            { id: 33, title: "Revolu√ß√£o Russa", year: 1917 },
            { id: 34, title: "Crise de 1929", year: 1929 },
            { id: 35, title: "Fim da 2¬™ Guerra Mundial", year: 1945 },
            { id: 36, title: "Chegada do Homem √† Lua", year: 1969 },
            { id: 37, title: "Queda do Muro de Berlim", year: 1989 }
        ],
        brasil: [
            { id: 40, title: "Chegada de Cabral", year: 1500 },
            { id: 41, title: "Invas√£o Holandesa em Pernambuco", year: 1630 },
            { id: 42, title: "Independ√™ncia do Brasil", year: 1822 },
            { id: 43, title: "Lei √Åurea", year: 1888 },
            { id: 44, title: "Proclama√ß√£o da Rep√∫blica", year: 1889 },
            { id: 45, title: "Era Vargas (In√≠cio)", year: 1930 },
            { id: 46, title: "Inaugura√ß√£o de Bras√≠lia", year: 1960 },
            { id: 47, title: "Diretas J√°", year: 1984 }
        ]
    };

    let timeline = [];
    let hand = [];

    function startGame(period) {
        let pool = [];
        if (period === 'geral') {
            Object.values(allEvents).forEach(arr => pool.push(...arr));
        } else {
            pool = [...allEvents[period]];
        }

        // Embaralhar e pegar 10 eventos
        pool = pool.sort(() => Math.random() - 0.5);
        const selected = pool.slice(0, 10);
        
        // Primeira carta na linha do tempo
        timeline = [selected.pop()];
        hand = selected;

        document.getElementById('message').innerText = "Arraste as cartas para o lugar correto na cronologia!";
        document.getElementById('message').className = "";
        render();
    }

    function render() {
        const timelineEl = document.getElementById('timeline-container');
        const handEl = document.getElementById('hand');

        timelineEl.innerHTML = "";
        handEl.innerHTML = "";

        // Ordenar timeline por ano antes de exibir
        timeline.sort((a, b) => a.year - b.year);

        // Criar zonas de drop antes da primeira carta
        timelineEl.appendChild(createDropZone(0));

        timeline.forEach((event, index) => {
            const card = document.createElement('div');
            card.className = 'timeline-card';
            let yearLabel = event.year < 0 ? Math.abs(event.year) + " a.C." : event.year;
            card.innerHTML = `<div>${event.title}</div><div class="year">${yearLabel}</div>`;
            timelineEl.appendChild(card);
            
            // Criar zona de drop ap√≥s cada carta
            timelineEl.appendChild(createDropZone(index + 1));
        });

        // Renderizar m√£o
        hand.forEach(event => {
            const card = document.createElement('div');
            card.className = 'event-card';
            card.draggable = true;
            card.innerText = event.title;
            card.ondragstart = (e) => {
                e.dataTransfer.setData("text", JSON.stringify(event));
            };
            handEl.appendChild(card);
        });

        if (hand.length === 0) {
            document.getElementById('message').innerHTML = "üéâ Vit√≥ria! Voc√™ dominou o tempo!";
            document.getElementById('message').className = "success";
        }
    }

    function createDropZone(index) {
        const zone = document.createElement('div');
        zone.className = 'drop-zone';
        zone.innerText = "+";
        zone.ondragover = (e) => {
            e.preventDefault();
            zone.classList.add('hover');
        };
        zone.ondragleave = () => zone.classList.remove('hover');
        zone.ondrop = (e) => handleDrop(e, index);
        return zone;
    }

    function handleDrop(e, index) {
        e.preventDefault();
        const event = JSON.parse(e.dataTransfer.getData("text"));
        const msg = document.getElementById('message');
        
        // L√≥gica de valida√ß√£o:
        // O evento deve ser maior que o anterior e menor que o pr√≥ximo
        const prev = timeline[index - 1] ? timeline[index - 1].year : -Infinity;
        const next = timeline[index] ? timeline[index].year : Infinity;

        if (event.year >= prev && event.year <= next) {
            timeline.splice(index, 0, event);
            hand = hand.filter(h => h.id !== event.id);
            let yearLabel = event.year < 0 ? Math.abs(event.year) + " a.C." : event.year;
            msg.innerText = `Correto! ${event.title} (${yearLabel})`;
            msg.className = "success";
        } else {
            msg.innerText = `Erro! Tente outro lugar para "${event.title}".`;
            msg.className = "error";
        }
        render();
    }
</script>

</body>
</html>